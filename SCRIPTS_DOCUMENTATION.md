# OpenTau Scripts åŠŸèƒ½è¯´æ˜æ–‡æ¡£

æœ¬æ–‡æ¡£è¯¦ç»†è¯´æ˜ `/data/OpenTau/src/opentau/scripts` ç›®å½•ä¸‹æ¯ä¸ªè„šæœ¬çš„åŠŸèƒ½å’Œç”¨é€”ã€‚

---

## ğŸ“‹ ç›®å½•

### æ ¸å¿ƒè®­ç»ƒå’Œè¯„ä¼°è„šæœ¬
- [train.py](#trainpy) - æ¨¡å‹è®­ç»ƒä¸»è„šæœ¬
- [eval.py](#evalpy) - ç­–ç•¥è¯„ä¼°å’Œrolloutè„šæœ¬
- [inference.py](#inferencepy) - æ¨¡å‹æ¨ç†è„šæœ¬
- [actions_mse_loss.py](#actions_mse_losspy) - åŠ¨ä½œé¢„æµ‹MSEæŸå¤±è®¡ç®—

### æ•°æ®å¤„ç†å’Œåˆ†æè„šæœ¬
- [get_advantage_and_percentiles.py](#get_advantage_and_percentilespy) - è®¡ç®—Advantageå’Œåˆ†ä½æ•°
- [visualize_dataset.py](#visualize_datasetpy) - æ•°æ®é›†å¯è§†åŒ–
- [compute_max_token_length.py](#compute_max_token_lengthpy) - è®¡ç®—æœ€å¤§tokené•¿åº¦

### æ¨¡å‹å¯¼å‡ºå’Œè½¬æ¢è„šæœ¬
- [export_to_onnx.py](#export_to_onnxpy) - å¯¼å‡ºæ¨¡å‹ä¸ºONNXæ ¼å¼
- [bin_to_safetensors.py](#bin_to_safetensorspy) - è½¬æ¢checkpointæ ¼å¼
- [zero_to_fp32.py](#zero_to_fp32py) - DeepSpeed checkpointè½¬æ¢
- [convert_checkpoint.sh](#convert_checkpointsh) - Checkpointè½¬æ¢è„šæœ¬

### é«˜çº§è§„åˆ’å™¨è„šæœ¬
- [high_level_planner_inference.py](#high_level_planner_inferencepy) - é«˜çº§è§„åˆ’å™¨æ¨ç†
- [nav_high_level_planner_inference.py](#nav_high_level_planner_inferencepy) - å¯¼èˆªè§„åˆ’å™¨æ¨ç†

### å·¥å…·å’Œè¾…åŠ©è„šæœ¬
- [launch.py](#launchpy) - è„šæœ¬å¯åŠ¨å™¨
- [display_sys_info.py](#display_sys_infopy) - ç³»ç»Ÿä¿¡æ¯æ˜¾ç¤º
- [download_libero_benchmarks.py](#download_libero_benchmarkspy) - ä¸‹è½½LIBEROæ•°æ®é›†
- [fake_tensor_training.py](#fake_tensor_trainingpy) - å‡å¼ é‡è®­ç»ƒæµ‹è¯•

### gRPCç›¸å…³
- [grpc/](#grpc) - gRPCæœåŠ¡ç›¸å…³è„šæœ¬

---

## è¯¦ç»†è¯´æ˜

### train.py
**åŠŸèƒ½**: æ¨¡å‹è®­ç»ƒä¸»è„šæœ¬

**ä¸»è¦åŠŸèƒ½**:
- åŠ è½½é…ç½®æ–‡ä»¶å’Œæ•°æ®é›†
- åˆå§‹åŒ–æ¨¡å‹ã€ä¼˜åŒ–å™¨ã€å­¦ä¹ ç‡è°ƒåº¦å™¨
- æ‰§è¡Œè®­ç»ƒå¾ªç¯ï¼ˆå‰å‘ä¼ æ’­ã€åå‘ä¼ æ’­ã€å‚æ•°æ›´æ–°ï¼‰
- å®šæœŸä¿å­˜checkpoint
- æ”¯æŒéªŒè¯å’Œè¯„ä¼°
- æ”¯æŒåˆ†å¸ƒå¼è®­ç»ƒï¼ˆé€šè¿‡accelerateï¼‰
- æ”¯æŒæ¢¯åº¦ç´¯ç§¯
- è®°å½•è®­ç»ƒæŒ‡æ ‡åˆ°wandb

**ä½¿ç”¨åœºæ™¯**:
- è®­ç»ƒVLA policyï¼ˆpi0, pi05ç­‰ï¼‰
- è®­ç»ƒValue function
- Fine-tuningæ¨¡å‹

**å…¥å£å‘½ä»¤**: `opentau-train`

---

### eval.py
**åŠŸèƒ½**: ç­–ç•¥è¯„ä¼°å’Œrolloutè„šæœ¬

**ä¸»è¦åŠŸèƒ½**:
- åœ¨ä»¿çœŸç¯å¢ƒä¸­è¿è¡Œç­–ç•¥rollout
- è®¡ç®—è¯„ä¼°æŒ‡æ ‡ï¼ˆæˆåŠŸç‡ã€å¹³å‡å¥–åŠ±ç­‰ï¼‰
- ä¿å­˜rolloutè§†é¢‘
- æ”¯æŒæ‰¹é‡ç¯å¢ƒå¹¶è¡Œè¯„ä¼°
- å¯ä»¥ä¿å­˜rolloutæ•°æ®ç”¨äºåç»­è®­ç»ƒ
- æ”¯æŒLIBEROæ•°æ®é›†è®°å½•

**ä½¿ç”¨åœºæ™¯**:
- è¯„ä¼°è®­ç»ƒå¥½çš„ç­–ç•¥æ€§èƒ½
- æ”¶é›†rolloutæ•°æ®ç”¨äºç¦»çº¿RLè®­ç»ƒ
- ç”Ÿæˆæ¼”ç¤ºè§†é¢‘

**å…¥å£å‘½ä»¤**: `opentau-eval`

**å…³é”®å‡½æ•°**:
- `rollout()`: æ‰§è¡Œå•æ¬¡rolloutï¼Œè¿”å›actionsã€rewardsã€successç­‰ä¿¡æ¯

---

### inference.py
**åŠŸèƒ½**: ç®€å•çš„æ¨¡å‹æ¨ç†è„šæœ¬

**ä¸»è¦åŠŸèƒ½**:
- åŠ è½½è®­ç»ƒå¥½çš„æ¨¡å‹
- ä½¿ç”¨è™šæ‹Ÿè§‚å¯Ÿï¼ˆdummy observationï¼‰è¿›è¡Œæ¨ç†
- æµ‹è¯•æ¨¡å‹æ¨ç†é€Ÿåº¦å’Œè¾“å‡ºå½¢çŠ¶
- æ”¯æŒtorch.compileä¼˜åŒ–

**ä½¿ç”¨åœºæ™¯**:
- å¿«é€Ÿæµ‹è¯•æ¨¡å‹æ˜¯å¦èƒ½æ­£å¸¸åŠ è½½å’Œæ¨ç†
- éªŒè¯æ¨¡å‹è¾“å‡ºæ ¼å¼
- æ€§èƒ½åŸºå‡†æµ‹è¯•

**ç‰¹ç‚¹**:
- ä¸éœ€è¦çœŸå®ç¯å¢ƒæˆ–æ•°æ®é›†
- ä½¿ç”¨ `create_dummy_observation()` åˆ›å»ºè™šæ‹Ÿè¾“å…¥

---

### actions_mse_loss.py
**åŠŸèƒ½**: è®¡ç®—åŠ¨ä½œé¢„æµ‹çš„MSEæŸå¤±å’ŒRÂ²åˆ†æ•°

**ä¸»è¦åŠŸèƒ½**:
- åŠ è½½è®­ç»ƒå¥½çš„ç­–ç•¥æ¨¡å‹
- åœ¨æ•°æ®é›†ä¸Šè¿è¡Œæ¨ç†
- è®¡ç®—é¢„æµ‹åŠ¨ä½œä¸çœŸå®åŠ¨ä½œçš„MSEæŸå¤±ï¼ˆæŒ‰ç»´åº¦ï¼‰
- è®¡ç®—RÂ²åˆ†æ•°ï¼ˆæŒ‰ç»´åº¦ï¼‰
- è¾“å‡ºæ¯ä¸ªåŠ¨ä½œç»´åº¦çš„ç»Ÿè®¡ä¿¡æ¯

**ä½¿ç”¨åœºæ™¯**:
- è¯„ä¼°æ¨¡å‹åœ¨æ•°æ®é›†ä¸Šçš„åŠ¨ä½œé¢„æµ‹ç²¾åº¦
- åˆ†æå“ªäº›åŠ¨ä½œç»´åº¦é¢„æµ‹æ›´å‡†ç¡®
- æ¨¡å‹æ€§èƒ½åˆ†æ

**è¾“å‡ºç¤ºä¾‹**:
```
the mean squared error loss per dimension is [0.001, 0.002, ...]
the r2 score per dimension is [0.95, 0.92, ...]
```

---

### get_advantage_and_percentiles.py
**åŠŸèƒ½**: è®¡ç®—Advantageå€¼å’Œåˆ†ä½æ•°ç»Ÿè®¡

**ä¸»è¦åŠŸèƒ½**:
- åŠ è½½è®­ç»ƒå¥½çš„Value function
- å¯¹æ•°æ®é›†ä¸­çš„æ¯ä¸ªæ•°æ®ç‚¹è®¡ç®—advantage
- Advantageå…¬å¼: `A(s_t) = R_t + V(s_{t+N}) - V(s_t)`
- è®¡ç®—advantageçš„åˆ†ä½æ•°ï¼ˆ0th, 5th, 10th, ..., 100thï¼‰
- å°†advantageä¿å­˜åˆ°JSONæ–‡ä»¶
- ç”¨äºç¡®å®šepsiloné˜ˆå€¼ï¼ˆç”¨äºæ•°æ®ç­›é€‰ï¼‰

**ä½¿ç”¨åœºæ™¯**:
- ç¦»çº¿RLè®­ç»ƒä¸­çš„æ•°æ®å‡†å¤‡
- ç¡®å®šadvantageé˜ˆå€¼ç”¨äºç­–ç•¥è®­ç»ƒ
- åˆ†ææ•°æ®è´¨é‡

**è¾“å‡º**:
- æ¯ä¸ªæ•°æ®ç‚¹çš„advantageå€¼ï¼ˆä¿å­˜åˆ° `advantages.json`ï¼‰
- åˆ†ä½æ•°ç»Ÿè®¡ï¼ˆç”¨äºç¡®å®šé˜ˆå€¼ï¼‰

**è¯¦ç»†è¯´æ˜**: å·²åœ¨ä¹‹å‰çš„æ–‡æ¡£ä¸­è¯¦ç»†è§£é‡Š

---

### visualize_dataset.py
**åŠŸèƒ½**: æ•°æ®é›†å¯è§†åŒ–å·¥å…·

**ä¸»è¦åŠŸèƒ½**:
- å¯è§†åŒ–LeRobotæ•°æ®é›†ä¸­çš„episode
- æ”¯æŒå¤šç§å¯è§†åŒ–æ¨¡å¼ï¼š
  - æœ¬åœ°æ¨¡å¼ï¼šç›´æ¥æ˜¾ç¤º
  - ä¿å­˜æ¨¡å¼ï¼šä¿å­˜ä¸º.rrdæ–‡ä»¶ï¼ˆRerunæ ¼å¼ï¼‰
  - è¿œç¨‹æ¨¡å¼ï¼šé€šè¿‡webç«¯å£æµå¼ä¼ è¾“
- æ˜¾ç¤ºå›¾åƒã€çŠ¶æ€ã€åŠ¨ä½œç­‰æ‰€æœ‰æ•°æ®æ¨¡æ€
- æ”¯æŒURDFæ¨¡å‹å¯è§†åŒ–ï¼ˆå¦‚æœå®‰è£…ï¼‰

**ä½¿ç”¨åœºæ™¯**:
- æ£€æŸ¥æ•°æ®é›†å†…å®¹
- è°ƒè¯•æ•°æ®åŠ è½½é—®é¢˜
- æ¼”ç¤ºæ•°æ®é›†å†…å®¹

**å…¥å£å‘½ä»¤**: `opentau-dataset-viz`

**ç¤ºä¾‹**:
```bash
opentau-dataset-viz --repo-id lerobot/pusht --episode-index 0
```

---

### compute_max_token_length.py
**åŠŸèƒ½**: è®¡ç®—æ•°æ®é›†ä¸­æ–‡æœ¬å­—æ®µçš„æœ€å¤§tokené•¿åº¦

**ä¸»è¦åŠŸèƒ½**:
- åˆ†ææ•°æ®é›†ä¸­çš„æ–‡æœ¬å­—æ®µï¼ˆå¦‚"prompt"ã€"response"ï¼‰
- ä½¿ç”¨ç›¸åº”çš„tokenizerè¿›è¡Œtokenization
- è®¡ç®—tokené•¿åº¦çš„åˆ†å¸ƒå’Œåˆ†ä½æ•°
- æ”¯æŒå¤šè¿›ç¨‹å¤„ç†åŠ é€Ÿ
- è¾“å‡ºJSONæ ¼å¼çš„ç»Ÿè®¡ç»“æœ

**ä½¿ç”¨åœºæ™¯**:
- ç¡®å®štokenizerçš„max_lengthé…ç½®
- åˆ†ææ•°æ®é›†ä¸­çš„æ–‡æœ¬é•¿åº¦åˆ†å¸ƒ
- ä¼˜åŒ–æ¨¡å‹é…ç½®

**è¾“å‡ºç¤ºä¾‹**:
```json
{
  "prompt": {
    "10": 0.05,
    "20": 0.15,
    ...
  },
  "response": {
    "50": 0.10,
    "100": 0.50,
    ...
  }
}
```

---

### export_to_onnx.py
**åŠŸèƒ½**: å°†æ¨¡å‹å¯¼å‡ºä¸ºONNXæ ¼å¼

**ä¸»è¦åŠŸèƒ½**:
- åŠ è½½è®­ç»ƒå¥½çš„ç­–ç•¥æ¨¡å‹
- åˆ†ç¦»VLMï¼ˆè§†è§‰è¯­è¨€æ¨¡å‹ï¼‰å’Œæœºå™¨äººåŠ¨ä½œè§£ç å™¨
- å¯¼å‡ºæœºå™¨äººåŠ¨ä½œè§£ç å™¨ä¸ºONNXæ ¼å¼
- å¤„ç†VLM token cacheï¼ˆkey_states, value_statesï¼‰
- åº”ç”¨å¿…è¦çš„monkey patchesä»¥å…¼å®¹ONNXå¯¼å‡º

**ä½¿ç”¨åœºæ™¯**:
- éƒ¨ç½²æ¨¡å‹åˆ°ç”Ÿäº§ç¯å¢ƒ
- åœ¨è¾¹ç¼˜è®¾å¤‡ä¸Šè¿è¡Œæ¨ç†
- ä¸å…¶ä»–æ¡†æ¶é›†æˆ

**ç‰¹ç‚¹**:
- åªå¯¼å‡ºåŠ¨ä½œè§£ç å™¨éƒ¨åˆ†ï¼ˆVLMåœ¨äº‘ç«¯è¿è¡Œï¼‰
- ä½¿ç”¨InferenceWrapperåŒ…è£…æ¨¡å‹
- æ”¯æŒpi0å’Œpi05ç­–ç•¥

**å…¥å£å‘½ä»¤**: `opentau-export`

---

### bin_to_safetensors.py
**åŠŸèƒ½**: å°†PyTorch .bin checkpointè½¬æ¢ä¸º.safetensorsæ ¼å¼

**ä¸»è¦åŠŸèƒ½**:
- åŠ è½½PyTorch .binæ ¼å¼çš„checkpoint
- è½¬æ¢ä¸º.safetensorsæ ¼å¼ï¼ˆæ›´å®‰å…¨ã€æ›´å¿«ï¼‰
- å¤„ç†å…±äº«å†…å­˜çš„tensorï¼ˆä½¿ç”¨deepcopyï¼‰
- æ”¯æŒæŒ‡å®šè®¾å¤‡æ˜ å°„ï¼ˆCPU/GPUï¼‰

**ä½¿ç”¨åœºæ™¯**:
- è½¬æ¢checkpointæ ¼å¼ä»¥ä¾¿æ›´å®‰å…¨åœ°å…±äº«
- ä¼˜åŒ–checkpointåŠ è½½é€Ÿåº¦
- ç¬¦åˆHuggingFaceæ¨¡å‹æ ¼å¼æ ‡å‡†

**ä¼˜åŠ¿**:
- safetensorsæ ¼å¼æ›´å®‰å…¨ï¼ˆé˜²æ­¢æ¶æ„ä»£ç æ‰§è¡Œï¼‰
- åŠ è½½é€Ÿåº¦æ›´å¿«
- å†…å­˜æ•ˆç‡æ›´é«˜

---

### zero_to_fp32.py
**åŠŸèƒ½**: ä»DeepSpeed ZeRO checkpointä¸­æå–fp32æƒé‡

**ä¸»è¦åŠŸèƒ½**:
- å¤„ç†DeepSpeed ZeRO 1/2/3çš„åˆ†å¸ƒå¼checkpoint
- åˆå¹¶åˆ†ç‰‡çš„checkpointä¸ºå®Œæ•´çš„state_dict
- æå–fp32æƒé‡ï¼ˆä»fp16/bf16è½¬æ¢ï¼‰
- æ”¯æŒå®‰å…¨åºåˆ—åŒ–ï¼ˆsafetensorsï¼‰
- å¤„ç†frozen parameters

**ä½¿ç”¨åœºæ™¯**:
- ä»DeepSpeedè®­ç»ƒä¸­æ¢å¤å®Œæ•´æ¨¡å‹
- è½¬æ¢checkpointä»¥ä¾¿åœ¨å…¶ä»–æ¡†æ¶ä¸­ä½¿ç”¨
- æ¨¡å‹éƒ¨ç½²å‡†å¤‡

**æ¥æº**: åŸºäºDeepSpeedå®˜æ–¹è„šæœ¬ä¿®æ”¹

**ä½¿ç”¨ç¤ºä¾‹**:
```bash
python zero_to_fp32.py checkpoint_dir/ output_dir/
```

---

### convert_checkpoint.sh
**åŠŸèƒ½**: Checkpointæ ¼å¼è½¬æ¢çš„ä¾¿æ·è„šæœ¬

**ä¸»è¦åŠŸèƒ½**:
- è‡ªåŠ¨åŒ–checkpointè½¬æ¢æµç¨‹
- å…ˆä½¿ç”¨zero_to_fp32.pyæå–å®Œæ•´state_dict
- å†ä½¿ç”¨bin_to_safetensors.pyè½¬æ¢ä¸ºsafetensorsæ ¼å¼
- æä¾›é”™è¯¯æ£€æŸ¥å’Œç”¨æˆ·å‹å¥½çš„è¾“å‡º

**ä½¿ç”¨åœºæ™¯**:
- ä¸€é”®è½¬æ¢DeepSpeed checkpoint
- å‡†å¤‡æ¨¡å‹ç”¨äºéƒ¨ç½²æˆ–å…±äº«

**ä½¿ç”¨ç¤ºä¾‹**:
```bash
./convert_checkpoint.sh outputs/train/pi05/checkpoints/000040/
```

---

### high_level_planner_inference.py
**åŠŸèƒ½**: é«˜çº§è§„åˆ’å™¨æ¨ç†è„šæœ¬

**ä¸»è¦åŠŸèƒ½**:
- å®ç°å®Œæ•´çš„ä»»åŠ¡æ‰§è¡Œæµç¨‹ï¼š
  1. é«˜çº§è§„åˆ’å™¨å°†ä»»åŠ¡åˆ†è§£ä¸ºå­ä»»åŠ¡
  2. ä½çº§ç­–ç•¥ï¼ˆVLA policyï¼‰æ‰§è¡Œæ¯ä¸ªå­ä»»åŠ¡
- æ”¯æŒä»»åŠ¡è®°å¿†ï¼ˆMemoryï¼‰åŠŸèƒ½
- å¤„ç†å¤šæ­¥éª¤ä»»åŠ¡è§„åˆ’

**ä½¿ç”¨åœºæ™¯**:
- æ‰§è¡Œå¤æ‚çš„å¤šæ­¥éª¤ä»»åŠ¡
- æµ‹è¯•é«˜çº§è§„åˆ’å™¨ä¸ä½çº§ç­–ç•¥çš„é›†æˆ
- å®é™…æœºå™¨äººä»»åŠ¡æ‰§è¡Œ

**ç‰¹ç‚¹**:
- ä½¿ç”¨HighLevelPlannerè¿›è¡Œä»»åŠ¡åˆ†è§£
- ä½¿ç”¨è®­ç»ƒå¥½çš„VLA policyæ‰§è¡ŒåŠ¨ä½œ
- æ”¯æŒä»»åŠ¡è®°å¿†å’ŒçŠ¶æ€è·Ÿè¸ª

---

### nav_high_level_planner_inference.py
**åŠŸèƒ½**: å¯¼èˆªé«˜çº§è§„åˆ’å™¨æ¨ç†è„šæœ¬

**ä¸»è¦åŠŸèƒ½**:
- ä¸“é—¨ç”¨äºå¯¼èˆªä»»åŠ¡
- ä»å›¾åƒç›®å½•åŠ è½½å¸§åºåˆ—
- ä½¿ç”¨NavHighLevelPlannerè¿›è¡Œå¯¼èˆªè§„åˆ’
- ç”Ÿæˆå¯¼èˆªæŒ‡ä»¤

**ä½¿ç”¨åœºæ™¯**:
- æœºå™¨äººå¯¼èˆªä»»åŠ¡
- åŸºäºè§†è§‰çš„è·¯å¾„è§„åˆ’
- å¯¼èˆªæŒ‡ä»¤ç”Ÿæˆ

**ä½¿ç”¨ç¤ºä¾‹**:
```bash
python nav_high_level_planner_inference.py --img_path /path/to/images/
```

---

### launch.py
**åŠŸèƒ½**: è„šæœ¬å¯åŠ¨å™¨ï¼ˆç»Ÿä¸€å…¥å£ï¼‰

**ä¸»è¦åŠŸèƒ½**:
- æä¾›ç»Ÿä¸€çš„è„šæœ¬å¯åŠ¨æ¥å£
- è‡ªåŠ¨å¤„ç†accelerateé…ç½®
- å°†å‘½ä»¤è¡Œå‚æ•°ä¼ é€’ç»™ç›®æ ‡è„šæœ¬
- æ”¯æŒå¤šä¸ªå‘½ä»¤å…¥å£ï¼ˆtrain, eval, export, visualizeï¼‰

**å®šä¹‰çš„å‘½ä»¤**:
- `opentau-train`: å¯åŠ¨è®­ç»ƒè„šæœ¬
- `opentau-eval`: å¯åŠ¨è¯„ä¼°è„šæœ¬
- `opentau-export`: å¯åŠ¨ONNXå¯¼å‡ºè„šæœ¬
- `opentau-dataset-viz`: å¯åŠ¨æ•°æ®é›†å¯è§†åŒ–è„šæœ¬

**è¯¦ç»†è¯´æ˜**: å·²åœ¨ä¹‹å‰çš„æ–‡æ¡£ä¸­è¯¦ç»†è§£é‡Š

---

### display_sys_info.py
**åŠŸèƒ½**: æ˜¾ç¤ºç³»ç»Ÿé…ç½®ä¿¡æ¯

**ä¸»è¦åŠŸèƒ½**:
- æ£€æµ‹å·²å®‰è£…çš„ä¾èµ–åŒ…
- æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ï¼š
  - OpenTauç‰ˆæœ¬
  - Pythonç‰ˆæœ¬
  - PyTorchç‰ˆæœ¬å’ŒCUDAæ”¯æŒ
  - HuggingFaceåº“ç‰ˆæœ¬
- è¾“å‡ºæ ¼å¼åŒ–çš„ç³»ç»Ÿä¿¡æ¯
- ç”¨äºbugæŠ¥å‘Šå’Œé—®é¢˜è¯Šæ–­

**ä½¿ç”¨åœºæ™¯**:
- å¿«é€Ÿæ£€æŸ¥ç³»ç»Ÿé…ç½®
- ç”ŸæˆbugæŠ¥å‘Šä¿¡æ¯
- éªŒè¯ä¾èµ–å®‰è£…

**è¾“å‡ºç¤ºä¾‹**:
```
- `opentau` version: 0.1.2
- Platform: Linux-5.15.0-...
- Python version: 3.10.12
- PyTorch version (GPU?): 2.7.1 (True)
- Cuda version: 12.1
```

---

### download_libero_benchmarks.py
**åŠŸèƒ½**: ä¸‹è½½LIBEROåŸºå‡†æµ‹è¯•æ•°æ®é›†

**ä¸»è¦åŠŸèƒ½**:
- ä¸‹è½½LIBEROæ•°æ®é›†åˆ°æŒ‡å®šç›®å½•
- æ”¯æŒä¸åŒçš„suiteï¼š
  - `object`: ç‰©ä½“æ“ä½œä»»åŠ¡
  - `spatial`: ç©ºé—´å…³ç³»ä»»åŠ¡
  - `goal`: ç›®æ ‡å¯¼å‘ä»»åŠ¡
  - `10`: LIBERO-10ä»»åŠ¡é›†
  - `90`: LIBERO-90ä»»åŠ¡é›†
  - `None`: æ‰€æœ‰æ•°æ®é›†
- éªŒè¯ä¸‹è½½çš„æ•°æ®é›†å®Œæ•´æ€§

**ä½¿ç”¨åœºæ™¯**:
- å‡†å¤‡LIBEROå®éªŒç¯å¢ƒ
- ä¸‹è½½ç‰¹å®šä»»åŠ¡é›†
- æ•°æ®é›†å®Œæ•´æ€§éªŒè¯

**ä½¿ç”¨ç¤ºä¾‹**:
```bash
python download_libero_benchmarks.py --suite 10 --download_dir /path/to/datasets
```

---

### fake_tensor_training.py
**åŠŸèƒ½**: ä½¿ç”¨FakeTensorè¿›è¡Œè®­ç»ƒæµ‹è¯•

**ä¸»è¦åŠŸèƒ½**:
- æ¼”ç¤ºFakeTensorModeçš„ä½¿ç”¨
- åˆ›å»ºå¤§å‹æ¨¡å‹è€Œä¸æ¶ˆè€—å®é™…å†…å­˜
- æµ‹è¯•è®­ç»ƒæµç¨‹è€Œä¸éœ€è¦çœŸå®æ•°æ®
- ç”¨äºè°ƒè¯•å’Œå¼€å‘

**ä½¿ç”¨åœºæ™¯**:
- æµ‹è¯•è®­ç»ƒä»£ç é€»è¾‘
- è°ƒè¯•å†…å­˜é—®é¢˜
- å¼€å‘æ–°åŠŸèƒ½æ—¶çš„å¿«é€Ÿæµ‹è¯•

**ç‰¹ç‚¹**:
- ä½¿ç”¨PyTorchçš„FakeTensorMode
- æ¨¡å‹å‚æ•°ä¸å ç”¨å®é™…å†…å­˜
- å¯ä»¥æµ‹è¯•éå¸¸å¤§çš„æ¨¡å‹

---

### grpc/
**åŠŸèƒ½**: gRPCæœåŠ¡ç›¸å…³è„šæœ¬

**ç›®å½•å†…å®¹**:
- `server.py`: gRPCæœåŠ¡å™¨å®ç°
- `client.py`: gRPCå®¢æˆ·ç«¯å®ç°
- `robot_inference.proto`: Protocol Bufferå®šä¹‰
- `robot_inference_pb2.py`: ç”Ÿæˆçš„Pythonä»£ç 
- `robot_inference_pb2_grpc.py`: ç”Ÿæˆçš„gRPCä»£ç 
- `generate_proto.sh`: ç”Ÿæˆprotoæ–‡ä»¶çš„è„šæœ¬

**ä¸»è¦åŠŸèƒ½**:
- æä¾›è¿œç¨‹æ¨¡å‹æ¨ç†æœåŠ¡
- æ”¯æŒå®¢æˆ·ç«¯-æœåŠ¡å™¨æ¶æ„
- å®šä¹‰æœºå™¨äººæ¨ç†çš„gRPCæ¥å£

**ä½¿ç”¨åœºæ™¯**:
- è¿œç¨‹æ¨¡å‹æ¨ç†
- åˆ†å¸ƒå¼ç³»ç»Ÿé›†æˆ
- æœºå™¨äººæ§åˆ¶ç³»ç»Ÿçš„æœåŠ¡åŒ–æ¶æ„

---

## è„šæœ¬åˆ†ç±»æ€»ç»“

### æŒ‰åŠŸèƒ½åˆ†ç±»

| ç±»åˆ« | è„šæœ¬ |
|------|------|
| **è®­ç»ƒ** | train.py |
| **è¯„ä¼°** | eval.py, inference.py, actions_mse_loss.py |
| **æ•°æ®å¤„ç†** | get_advantage_and_percentiles.py, visualize_dataset.py, compute_max_token_length.py |
| **æ¨¡å‹å¯¼å‡º** | export_to_onnx.py, bin_to_safetensors.py, zero_to_fp32.py, convert_checkpoint.sh |
| **è§„åˆ’å™¨** | high_level_planner_inference.py, nav_high_level_planner_inference.py |
| **å·¥å…·** | launch.py, display_sys_info.py, download_libero_benchmarks.py, fake_tensor_training.py |
| **æœåŠ¡** | grpc/ |

### æŒ‰ä½¿ç”¨é¢‘ç‡åˆ†ç±»

**å¸¸ç”¨è„šæœ¬**:
- `train.py` - è®­ç»ƒæ¨¡å‹
- `eval.py` - è¯„ä¼°æ¨¡å‹
- `get_advantage_and_percentiles.py` - RLè®­ç»ƒæ•°æ®å‡†å¤‡

**å¶å°”ä½¿ç”¨**:
- `export_to_onnx.py` - æ¨¡å‹éƒ¨ç½²
- `visualize_dataset.py` - æ•°æ®æ£€æŸ¥
- `compute_max_token_length.py` - é…ç½®ä¼˜åŒ–

**å·¥å…·è„šæœ¬**:
- `launch.py` - å¯åŠ¨å™¨
- `display_sys_info.py` - ç³»ç»Ÿä¿¡æ¯
- `download_libero_benchmarks.py` - æ•°æ®ä¸‹è½½

---

## ä½¿ç”¨å»ºè®®

1. **è®­ç»ƒæ–°æ¨¡å‹**: ä½¿ç”¨ `train.py` (é€šè¿‡ `opentau-train`)
2. **è¯„ä¼°æ¨¡å‹æ€§èƒ½**: ä½¿ç”¨ `eval.py` (é€šè¿‡ `opentau-eval`)
3. **å‡†å¤‡RLè®­ç»ƒæ•°æ®**: ä½¿ç”¨ `get_advantage_and_percentiles.py`
4. **æ£€æŸ¥æ•°æ®é›†**: ä½¿ç”¨ `visualize_dataset.py`
5. **éƒ¨ç½²æ¨¡å‹**: ä½¿ç”¨ `export_to_onnx.py`
6. **è½¬æ¢checkpoint**: ä½¿ç”¨ `convert_checkpoint.sh`

---

## ç›¸å…³æ–‡æ¡£

- [RL Training Execution Guide](./RL_TRAINING_EXECUTION_GUIDE.md) - RLè®­ç»ƒæ‰§è¡ŒæŒ‡å—
- [OpenTau Train Execution Flow](./OPENTAU_TRAIN_EXECUTION_FLOW.md) - è®­ç»ƒæµç¨‹è¯¦è§£
